(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1239:function(e,t,a){"use strict";a.r(t);var n=a(34),r=a(35),l=a(37),s=a(36),c=a(38),o=a(74),i=a(1),m=a.n(i),d=a(132),u=a(615),p=a(14),f=a(913),h=a.n(f),E=(a(51),a(50)),v=a.n(E),g=a(46),b=a(644),w=a.n(b),y=a(647),D=a(684),O=a(1231),k=a(685).parse,N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1,modal:!1,page:{number:0,size:20,totalElements:0,totalPages:0},offset:1,all:[],feedbacks:[],filters:{search:"",fromDate:"",toDate:""},editFlag:!1,addError:"",deleteError:"",updateError:""},a.searchUser=function(e){var t=e.target.value,n=a.state.filters;n.search=t,a.setState({filters:n},function(e){a.loadFeedbacks()})},a.downloadReport=function(){var e={fields:["id","email","creationDate"]};a.loadFeedbacks(a.state.offset,!0,function(){var t=k(a.state.all,e);D.a.download(t,"reports.csv","text/csv")})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"handleDateChange",value:function(e,t){var a=this,n=this.state.filters;n[t+"Date"]="from"===t?e.startOf("day").utc().format("YYYY/MM/DD HH:mm:ss"):e.endOf("day").utc().format("YYYY/MM/DD HH:mm:ss"),this.setState({filters:n},function(e){a.loadFeedbacks()})}},{key:"loadFeedbacks",value:function(e,t,a){var n=this;e||(e=1);var r=o.i+o.d+"api/subscribers?projection=feedback_details&sort=creationDate,desc&page="+(e-1);this.state.filters.search&&(r+="&email="+encodeURIComponent("%"+this.state.filters.search+"%")),r=Object(o.e)(this.state,r),t&&(r+="&size=100000"),v.a.get(r).then(function(e){t?n.setState({all:e.data._embedded.subscribers}):n.setState({feedbacks:e.data._embedded.subscribers,page:e.data.page}),a&&a()})}},{key:"componentDidMount",value:function(){this.loadFeedbacks()}},{key:"printReport",value:function(){this.loadFeedbacks(this.state.offset,!0,function(){window.print()})}},{key:"render",value:function(){var e=this;return m.a.createElement(u.a,null,this.state.loading&&m.a.createElement(d.a,null),m.a.createElement("div",{className:"content-heading"},m.a.createElement("div",null,"Subscribers")),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-12"},m.a.createElement(p.c,{className:"card-default"},m.a.createElement("div",{className:"card-header"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-2"},m.a.createElement("h4",{className:"float-right"},"Filters : ")),m.a.createElement("div",{className:"col-md-4"},m.a.createElement(p.n,{type:"text",onChange:this.searchUser,value:this.state.filters.search,placeholder:"search email..."})),m.a.createElement("div",{className:"col-md-1"},m.a.createElement(h.a,{dateFormat:"DD/MM/YYYY",timeFormat:!1,closeOnSelect:!0,inputProps:{className:"form-control",readOnly:!0},onChange:function(t){return e.handleDateChange(t,"from")},defaultValue:this.state.filters.fromDate})),m.a.createElement("div",{className:"col-md-1"},m.a.createElement(h.a,{dateFormat:"DD/MM/YYYY",timeFormat:!1,closeOnSelect:!0,inputProps:{className:"form-control",readOnly:!0},onChange:function(t){return e.handleDateChange(t,"to")},defaultValue:this.state.filters.toDate})),m.a.createElement("div",{className:"col-md-2"},m.a.createElement(O.a,{className:"d-none",variant:"contained",color:"secondary",size:"small",onClick:function(){return e.printReport()}},"Print"),m.a.createElement(O.a,{className:"d-none",variant:"contained",color:"secondary",size:"small",onClick:function(){return e.downloadReport()}},"Download")))),m.a.createElement(p.d,null,m.a.createElement(p.A,{hover:!0,responsive:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"#"),m.a.createElement("th",null,"Email"),m.a.createElement("th",null,"Creation Date"))),m.a.createElement("tbody",null,this.state.feedbacks.map(function(e,t){return m.a.createElement("tr",{key:e.id},m.a.createElement("td",null,t+1),m.a.createElement("td",null,e.email),m.a.createElement("td",null,m.a.createElement(w.a,{format:"DD MMM YY HH:mm"},e.creationDate)))}))),m.a.createElement(y.a,{page:this.state.page,onChange:function(t){return e.loadFeedbacks(t)}}),m.a.createElement(p.A,{id:"printSection",responsive:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"#"),m.a.createElement("th",null,"Email"),m.a.createElement("th",null,"Creation Date"))),m.a.createElement("tbody",null,this.state.all.map(function(e,t){return m.a.createElement("tr",{key:e.id},m.a.createElement("td",null,t+1),m.a.createElement("td",null,e.email),m.a.createElement("td",null,m.a.createElement(w.a,{format:"DD MMM YY HH:mm"},e.creationDate)))}))))))))}}]),t}(i.Component);t.default=Object(g.b)(function(e){return{settings:e.settings,user:e.login.userObj}})(N)},615:function(e,t,a){"use strict";var n=a(1),r=a.n(n),l=function(e){return r.a.createElement("div",{className:"content-wrapper"},e.unwrap?r.a.createElement("div",{className:"unwrap"},e.children):e.children)};l.defaultProps={unwrap:!1},t.a=l},647:function(e,t,a){"use strict";var n=a(786),r=a(34),l=a(35),s=a(37),c=a(36),o=a(38),i=a(1),m=a.n(i),d=a(679),u=a.n(d),p=a(787);function f(){var e=Object(n.a)(["\n    padding-top: 1em;\n    white-space: nowrap;\n    font-size: 16px;\n  "]);return f=function(){return e},e}function h(){var e=Object(n.a)(["\n    padding-top: 1em;\n    white-space: nowrap;\n    float: left;\n  "]);return h=function(){return e},e}function E(){var e=Object(n.a)(["\ndisplay: flex;\n-webkit-justify-content: flex-end;\njustify-content: flex-end;\nflex-direction: column;\nhite-space: nowrap;\ntext-align: right;\nmargin: 0px;\n\n"]);return E=function(){return e},e}function v(){var e=Object(n.a)(["\n    margin: 20px 10px 0;\n  "]);return v=function(){return e},e}var g=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).renderPagination=function(){var e=a.props.page.number*a.props.page.size+1,t=e+a.props.page.size-1;t>a.props.page.totalElements&&(t=a.props.page.totalElements);var n="Showing "+e+" to "+t+" of "+a.props.page.totalElements+" entries";return m.a.createElement("div",{className:"row text-center"},0===a.props.page.totalElements&&m.a.createElement("div",{className:"col-sm-12"},m.a.createElement(D,null,"No records found")),a.props.page.totalElements>0&&a.props.page.totalPages>1&&m.a.createElement("div",{className:"col-sm-12 col-md-5"},m.a.createElement(y,null,n)),a.props.page.totalElements>0&&a.props.page.totalPages>1&&m.a.createElement("div",{className:"col-sm-12 col-md-7"},m.a.createElement(w,null,m.a.createElement(u.a,{activePage:a.props.page.number+1,itemsCountPerPage:a.props.page.size,totalItemsCount:a.props.page.totalElements,pageRangeDisplayed:5,onChange:a.props.onChange,itemClass:"page-item",linkClass:"page-link",prevPageText:"<",nextPageText:">"}))))},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return m.a.createElement(b,null,m.a.createElement("style",null,"ul.pagination { white-space: nowrap; justify-content: flex-end; margin: 2px 0px; }"),this.renderPagination())}}]),t}(m.a.Component);t.a=g;var b=p.a.div(v()),w=p.a.div(E()),y=p.a.span(h()),D=p.a.span(f())},684:function(e,t,a){"use strict";var n=a(654)({displayName:"FileDownload",statics:{download:function(e,t,a){var n=new Blob([e],{type:a});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var r=document.createElement("a"),l=URL.createObjectURL(n);r.href=l,r.download=t,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(l)},0)}}},render:function(){}});t.a=n}}]);
//# sourceMappingURL=22.b0008e12.chunk.js.map